{% if hidden_events_count %}
    <a href="#" class="btn btn-sm btn-default" onclick="$('.collapse').collapse('toggle')">显示隐藏</a>
{% endif %}

{% if diary %}
    <a class="btn btn-default btn-sm" target="_blank" href="{% url 'admin:diary_event_add' %}?event_type=manual&event_date={{ diary.formatted_date }}">添加日程</a>
{% else %}
    <a class="btn btn-default btn-sm" target="_blank" href="{% url 'admin:diary_event_add' %}?event_type=manual">添加条目</a>
{% endif %}
{% if tasks_all_done %}
    <a class="btn btn-primary btn-sm" href="{% url 'diary_todo' %}">今日任务完成! 查看TODO</a>
{% endif %}
<ul class="list-unstyled">
    {% for event in events %}
        <li id="event-{{ event.id }}" style="{% if event.is_important %}font-weight:bold; color: red;{% endif %}"
            {% if event.hidden %}class="collapse"{% endif %}>
            <div class="checkbox">
                {% if event.is_task %}
                    <label>
                        <input type="checkbox" data-event_id="{{ event.id }}" class="event-checkbox" id="event-checkbox-{{ event.id }}" {% if event.is_done %}checked="checked"{% endif %}>
                        {{ event }}
                    </label>
                    {% if event.memo %}
                        ： {{ event.memo }}
                    {% endif %}
                {% else %}
                    {% if event.event_type == "rule_event" %}
                        <span class="glyphicon glyphicon-info-sign"></span>
                    {% else %}
                        <span class="glyphicon glyphicon-stop"></span>
                    {% endif %}
                    {{ event }}
                    {% if event.memo %}
                        ： {{ event.memo }}
                    {% endif %}
                {% endif %}
            </div>
        </li>
    {% endfor %}
</ul>
